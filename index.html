<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portail de SÃ©lection de Langue</title>
    <link rel="stylesheet" href=".resc/.theme/index.css">
</head>
<body>

    <div class="container">
        <h1>
        Veuillez choisir votre langue | Please choose your language | 
        <span dir="rtl">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ©</span>
    </h1>
        
        <button onclick="setLanguage('ar')">ğŸ‡©ğŸ‡¿ Arabe</button>
        <button onclick="setLanguage('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</button>
        <button onclick="setLanguage('en')">ğŸ‡¬ğŸ‡§ English</button>

    </div>
<script>
    // 1. DÃ©finir la clÃ© pour le localStorage
    const LANG_KEY = 'userPreferredLang';

    // 2. DÃ©finir la liste des langues valides (Liste Blanche)
    // C'est ici que vous ajoutez ou supprimez des langues.
    const VALID_LANGUAGES = ['fr', 'en', 'ar'];

    // 3. Fonction pour enregistrer le choix et rediriger avec vÃ©rification
    function setLanguage(langCode) {
        // Convertir en minuscules pour la vÃ©rification
        const code = langCode.toLowerCase();

        // ğŸš¨ VÃ‰RIFICATION : Assurez-vous que le code est dans notre liste blanche
        if (!VALID_LANGUAGES.includes(code)) {
            console.error(`Code de langue invalide: ${langCode}. Le choix n'a pas Ã©tÃ© enregistrÃ©.`);
            // Vous pourriez afficher un message Ã  l'utilisateur ici si nÃ©cessaire
            return; // ArrÃªter l'exÃ©cution de la fonction
        }

        // Si la vÃ©rification est rÃ©ussie :
        // Enregistre le code de langue dans le localStorage
        localStorage.setItem(LANG_KEY, code);

        // Redirige vers la page d'accueil dans la langue sÃ©lectionnÃ©e
        // (Assurez-vous que les pages index-fr.html, index-en.html, index-es.html, etc., existent)
        window.location.href = `hub-${code}.html`;
    }

    // 4. (Optionnel) VÃ©rification au chargement
    document.addEventListener('DOMContentLoaded', () => {
        const storedLang = localStorage.getItem(LANG_KEY);
        
        // VÃ©rifie si une langue est stockÃ©e ET si elle est valide
        if (storedLang && VALID_LANGUAGES.includes(storedLang)) {
            console.log(`PrÃ©fÃ©rence trouvÃ©e et valide: ${storedLang}. Redirection immÃ©diate.`);
            window.location.href = `index-${storedLang}.html`;
        } else if (storedLang) {
             // Nettoie les anciennes prÃ©fÃ©rences si elles sont invalides
            localStorage.removeItem(LANG_KEY);
            console.log('PrÃ©fÃ©rence stockÃ©e invalide ou obsolÃ¨te effacÃ©e. Affichage du portail.');
        }
        // Si aucune langue valide n'est trouvÃ©e, le portail reste affichÃ©.
    });
</script>
</body>
</html>